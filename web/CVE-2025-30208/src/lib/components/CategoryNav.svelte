<script >
  import { page } from '$app/stores';
  
  let { 
    categories,
    currentCategory
  }= $props();
  
  // Get current path to determine active category
  let currentPath = $derived($page.url.pathname);
  let activeCategory = $derived(() => {
    if (currentPath === '/') return 'all';
    if (currentPath.startsWith('/category/')) {
      return currentPath.split('/')[2];
    }
    return 'all';
  });
</script>

<nav class="category-nav" role="navigation" aria-label="Categories">
  <ul class="category-list">
    <li>
      <a 
        href="/" 
        class="category-link"
        class:active={activeCategory() === 'all'}
      >
        All News
      </a>
    </li>
    {#each categories as category}
      <li>
        <a 
          href="/category/{category.slug}"
          class="category-link"
          class:active={activeCategory() === category.slug}
          style="--category-color: {category.color}"
        >
          {category.name}
        </a>
      </li>
    {/each}
  </ul>
</nav>

<style>
  .category-nav {
    background: white;
    border-radius: 0.75rem;
    padding: 0.5rem;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    margin-bottom: 2rem;
  }
  
  .category-list {
    display: flex;
    list-style: none;
    padding: 0;
    margin: 0;
    gap: 0.5rem;
    overflow-x: auto;
    scrollbar-width: none;
  }
  
  .category-list::-webkit-scrollbar {
    display: none;
  }
  
  .category-link {
    display: block;
    padding: 0.75rem 1.5rem;
    border-radius: 0.5rem;
    text-decoration: none;
    font-weight: 600;
    font-size: 0.875rem;
    color: #6b7280;
    white-space: nowrap;
    transition: all 0.2s ease;
    position: relative;
  }
  
  .category-link:hover {
    color: #374151;
    background: #f3f4f6;
  }
  
  .category-link.active {
    color: white;
    background: var(--category-color, #667eea);
  }
  
  @media (max-width: 640px) {
    .category-link {
      padding: 0.5rem 1rem;
      font-size: 0.8125rem;
    }
  }
</style>
